


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ChatbotMessageManager</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.zurtar.mhma.chatbot</a>
</div>

<h1>Coverage Summary for Class: ChatbotMessageManager (com.zurtar.mhma.chatbot)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ChatbotMessageManager</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/70)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/168)
  </span>
</td>
</tr>
  <tr>
    <td class="name">ChatbotMessageManager$simulateBotResponse$1</td>
  </tr>
  <tr>
    <td class="name">ChatbotMessageManager$WhenMappings</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/70)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/168)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.zurtar.mhma.chatbot
&nbsp;
&nbsp;import android.os.Build
&nbsp;import androidx.annotation.RequiresApi
&nbsp;import com.zurtar.mhma.data.ChatMessage
&nbsp;import kotlinx.coroutines.delay
&nbsp;import java.util.Date
&nbsp;
&nbsp;/*
&nbsp; Manages the flow of messages (sending and generating bot replies), and the logic
&nbsp; for the different activities of the chatbot.
&nbsp;
&nbsp;addCurrentBranchLog Function is used to add the log the user is currently doing into the main
&nbsp;log list. This avoids accidentally adding all existing messages into the log, including branch
&nbsp;selection messages or messages from previous logs.
&nbsp; */
&nbsp;@RequiresApi(Build.VERSION_CODES.O)
<b class="nc">&nbsp;class ChatbotMessageManager (</b>
<b class="nc">&nbsp;    private val addCurrentBranchLog: (List&lt;ChatMessage&gt;, ChatBranch) -&gt; Unit,</b>
<b class="nc">&nbsp;    private val addCurrentBranchLogWithDate: (List&lt;ChatMessage&gt;, ChatBranch, Date?) -&gt; Unit</b>
&nbsp;){
&nbsp;    //Used to list of all messages in the chatbot dialogue. Used for presenting messages in the ChatbotPage
<b class="nc">&nbsp;    private val _allMessages = mutableListOf&lt;ChatMessage&gt;()</b>
<b class="nc">&nbsp;    val allMessages: List&lt;ChatMessage&gt; get() = _allMessages.toList()</b>
&nbsp;
&nbsp;    //Used to store relevant messages into newly created logs
<b class="nc">&nbsp;    var currentBranchMessages: MutableList&lt;ChatMessage&gt; = mutableListOf()</b>
<b class="nc">&nbsp;    private var currentBranch: ChatBranch = ChatBranch.Initial</b>
&nbsp;
&nbsp;    private var completionDate: Date? = null
&nbsp;
&nbsp;    //tracks the current step in the active branch
&nbsp;    private var branchStep: Int = 0
&nbsp;
&nbsp;    fun getBranchStep(): Int {
<b class="nc">&nbsp;        return branchStep</b>
&nbsp;    }
&nbsp;
&nbsp;    //returns active dialogue branch
&nbsp;    fun getCurrentBranch(): ChatBranch {
<b class="nc">&nbsp;        return currentBranch</b>
&nbsp;    }
&nbsp;
&nbsp;    //adds new message to total message list by taking a ChatMessage object
&nbsp;    fun addMessage(message: ChatMessage) {
<b class="nc">&nbsp;        _allMessages.add(message)</b>
&nbsp;    }
&nbsp;
&nbsp;    fun sendCompletionDate(selectedDate: Date?){
<b class="nc">&nbsp;        completionDate = selectedDate</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun resetCompletionDate() {
<b class="nc">&nbsp;        completionDate = null</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;    Used to simulate bot response to the user. Currently there is a delay of 500 ms
&nbsp;    It may need to be removed, as could be possible for the user to send messages too quickly,
&nbsp;    interrupting dialogue branch logic (this has not occurred to me while testing, so I don&#39;t know
&nbsp;    if this is actually something that can happen)
&nbsp;     */
&nbsp;    suspend fun simulateBotResponse(userMessage: String) {
<b class="nc">&nbsp;        val botResponse = getBotDialogue(userMessage)</b>
<b class="nc">&nbsp;        delay(500)</b>
<b class="nc">&nbsp;        addMessage(ChatMessage(Sender.Bot, botResponse, Date()))</b>
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;    Retrieves the appropriate response from the bot given a message from the user.
&nbsp;    In ChatbotPage, there are buttons that the user presses which send specific strings
&nbsp;    that activate different branches.
&nbsp;     */
&nbsp;    private fun getBotDialogue(userMessage: String): String {
<b class="nc">&nbsp;        if (currentBranch == ChatBranch.Initial &amp;&amp; branchStep != 0){</b>
<b class="nc">&nbsp;            currentBranchMessages.clear()</b>
<b class="nc">&nbsp;            getBranch(userMessage)</b>
&nbsp;        }
<b class="nc">&nbsp;        return when (currentBranch) {</b>
&nbsp;            ChatBranch.Initial -&gt; {
<b class="nc">&nbsp;                getBranch(userMessage)</b>
<b class="nc">&nbsp;                branchStep = 1</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Hello! Welcome back. I&#39;m Zeke, and I&#39;m here to support you as best I can. What activity would you like to do today?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.SmartGoal -&gt; {
<b class="nc">&nbsp;                handleSmartGoalBranch()</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.ThoughtRecord -&gt; {
<b class="nc">&nbsp;                handleThoughtRecordBranch()</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.AnxietyExploration -&gt; {
<b class="nc">&nbsp;                handleAnxietyExplorationBranch()</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.ActionPlan -&gt; {
<b class="nc">&nbsp;                handleActionPlanBranch()</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.CBTModeling -&gt; {
<b class="nc">&nbsp;                handleCBTModelingBranch()</b>
&nbsp;            }
&nbsp;
&nbsp;            ChatBranch.Explanation -&gt; {
<b class="nc">&nbsp;                handleExplanationBranch(userMessage)</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    //Returns list of all available branches
&nbsp;    fun getBranchList(): List&lt;ChatBranch&gt; {
<b class="nc">&nbsp;        return listOf(</b>
<b class="nc">&nbsp;            ChatBranch.SmartGoal,</b>
<b class="nc">&nbsp;            ChatBranch.ThoughtRecord,</b>
<b class="nc">&nbsp;            ChatBranch.AnxietyExploration,</b>
<b class="nc">&nbsp;            ChatBranch.ActionPlan,</b>
<b class="nc">&nbsp;            ChatBranch.CBTModeling,</b>
<b class="nc">&nbsp;            ChatBranch.Explanation</b>
&nbsp;        )
&nbsp;    }
&nbsp;
&nbsp;    //updates current branch/activity based on string value
&nbsp;     fun getBranch(userMessage: String) {
<b class="nc">&nbsp;        when {</b>
<b class="nc">&nbsp;            userMessage.contains(&quot;thought record&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.ThoughtRecord</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;anxiety exploration&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.AnxietyExploration</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;smart goal&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.SmartGoal</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;action plan&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.ActionPlan</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;CBT modeling&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.CBTModeling</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;What are these different activities for?&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                currentBranch = ChatBranch.Explanation</b>
<b class="nc">&nbsp;                branchStep = 0</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;    Handles logic for explanation branch. Explains different branches based on string
&nbsp;    value passed to it. In ChatbotPage, string values are determined based on buttons
&nbsp;    inputs.
&nbsp;     */
&nbsp;    private fun handleExplanationBranch(userMessage: String): String {
<b class="nc">&nbsp;        if (branchStep == 0) {</b>
<b class="nc">&nbsp;            branchStep++</b>
<b class="nc">&nbsp;            return &quot;Which of the activities would you like me to explain?&quot;</b>
&nbsp;        }
<b class="nc">&nbsp;        return when {</b>
<b class="nc">&nbsp;            userMessage.contains(&quot;thought record&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                &quot;A thought record is used to help identify and challenge negative thought responses to events in your life. In this activity, you&#39;ll choose an event that happened to you and explore it. You&#39;ll then identify your emotional responses and your automatic/immediate thoughts to the event. Afterwards, you&#39;ll be guided through questions to help you reframe your thoughts and look for alternative perspectives.\n\nWould you like me to explain any of the other activities?&quot;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;anxiety exploration&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                &quot;Anxiety exploration, or worry exploration, is an activity used to help people analyze their worries, and ways to manage them, to challenge catastrophization. You&#39;ll identify a worry that you believe may happen to you or in your live, examine evidence for and against that worry, and develop strategies for handling it..\n\nWould you like me to explain any of the other activities?&quot;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;smart goal&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                &quot;SMART goals are used to help create objectives that are more easily realisable. You will create a goal that is Specific, Measurable, Attainable, Relevant, and Time-bound.\n\nWould you like me to explain any of the other activities?&quot;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;action plan&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                &quot;An action plan is used to help plan out a positive activity you would like to do for yourself. You&#39;ll set out a date to do the activity, address potential obstacles that my prevent you from doing it, and then create plans to overcome those obstacles.\n\nWould you like me to explain any of the other activities?&quot;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            userMessage.contains(&quot;cbt modeling&quot;, ignoreCase = true) -&gt; {</b>
<b class="nc">&nbsp;                &quot;In cognitive behavioural therapy modeling, you will apply the CBT triangle onto a situation you have experienced, analyzing the intimate relations between your thoughts, feelings, and behaviours, for the purpose of disrupting any negative cycles.\n\nWould you like me to explain any of the other activities?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                &quot;I hope that helped clear things up! Now, would you like to select one of the activities to do?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /*
&nbsp;    The following handle..Branch functions all work based on the branchStep value.
&nbsp;    Using the branch step value, they return the appropriate string.
&nbsp;     */
&nbsp;    private fun handleSmartGoalBranch(): String {
<b class="nc">&nbsp;        return when (branchStep) {</b>
&nbsp;            0 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;What is it that you would like to do? Try to be as specific as you can be, to help make your goal as concrete as possible.&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            1 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;How will you measure your progress towards achieving your goal?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            2 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Is this goal attainable? What will you need to do to complete it?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            3 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Why is this goal relevant to you? What makes it important for you?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            4 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;On what day do you want to complete this goal by?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                addCurrentBranchLogWithDate(currentBranchMessages, ChatBranch.SmartGoal, completionDate)</b>
<b class="nc">&nbsp;                resetCompletionDate()</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Great work! Lets save that goal now. Is there anything else you would like to do today?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun handleThoughtRecordBranch(): String{
<b class="nc">&nbsp;        return when (branchStep) {</b>
&nbsp;            0 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Lets start by discussing what event led to the negative feelings. Could you please describe the situation to me?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            1 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;And how would you describe the emotional experiences you had in response to the event? How intense were those experiences?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            2 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Next, lets explore the immediate thoughts you experienced during the situation. How much would you say that you actually believe in these thought?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            3 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Now that we&#39;ve identified the situation and how your experiences from it&#39;, lets move on to reframing the situation. Could you try to identify the immediate thought that you feel was the most significant in producing your negative feelings? We&#39;ll try to explore that thought further.&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            4 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;How would you describe the impact believing in or having this thought has on you?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            5 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;If you didn&#39;t have this thought during the situation, how do you think your feelings would have changed?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            6 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Do you feel that there is any evidence for this thought? Could you describe it?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            7 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;And on the other hand, is there any evidence against this thought that you could describe?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            8 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Based on what you&#39;ve described, is there an alternative thought or explanation that you feel fits this evidence better?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            9 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;If someone you cared for were to experience a similar situation to you, and responded with the same emotional experiences and immediate thoughts, what would you tell them?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            10 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Finally, if you were to go through a similar situation again in the future, how would you prepare for it? Do you think that you could formulate an alternative response to it?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                addCurrentBranchLog(currentBranchMessages, ChatBranch.ThoughtRecord)</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Amazing work!. Lets save that thought record now. Is there anything else you&#39;d like to do?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun handleAnxietyExplorationBranch(): String{
<b class="nc">&nbsp;        return when (branchStep) {</b>
&nbsp;            0 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;What is something that could happen to you or in your life that you&#39;re worried about?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            1 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Is there any evidence that this worry will or could happen?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            2 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Is there any evidence that this worry will not happen?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            3 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;If your worry doesn&#39;t happen, how would that impact you?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            4 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;If your worry does come true, what would happen? How could you handle the situation? Could you create some strategies for handling it?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            5 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;After answering these questions, has your worry or your perspective on it changed? If so, could you describe those changes?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                addCurrentBranchLog(currentBranchMessages, ChatBranch.AnxietyExploration)</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Great work! Lets save this log for now. Is there anything else you would like to do?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun handleActionPlanBranch(): String {
<b class="nc">&nbsp;        return when (branchStep) {</b>
&nbsp;            0 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;What positive activity would you like to do?.&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            1 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;What day do you want to try doing this activity on?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            2 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Why do you want to do this activity? Why is it important to you?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            3 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Are there any obstacles that you can think of, which could prevent you from doing this activity?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            4 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Could you think of some strategies that you could use to overcome those obstacles?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                addCurrentBranchLogWithDate(currentBranchMessages, ChatBranch.SmartGoal, completionDate)</b>
<b class="nc">&nbsp;                resetCompletionDate()</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Great work! Lets save that action plan now. Is there anything else you would like to do today?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun handleCBTModelingBranch(): String{
<b class="nc">&nbsp;        return when (branchStep) {</b>
&nbsp;            0 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;To start, lets identify the situation you want to model using the CBT triangle. Could you describe the situation?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            1 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Now, lets explore the thoughts, feelings, and thoughts you hand in response to the situation\n\nFirst, what were you immediate thoughts in response to this situation?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            2 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Next, what feelings did you experience in response to this situation?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            3 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;What were your behaviours in response to the situation?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            4 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Are there any relationships you see between your thoughts and your feelings?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            5 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Are there any relationships you see between your feelings and your behaviours?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            6 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;And are there any relationships you see between your behaviours and your thoughts&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            7 -&gt; {
<b class="nc">&nbsp;                branchStep++</b>
<b class="nc">&nbsp;                &quot;Finally, are there any relationships you see between your thoughts, feelings, and behaviours as a whole? Could you describe those relationships?&quot;</b>
&nbsp;            }
&nbsp;
&nbsp;            else -&gt; {
<b class="nc">&nbsp;                currentBranch = ChatBranch.Initial</b>
<b class="nc">&nbsp;                addCurrentBranchLog(currentBranchMessages, ChatBranch.CBTModeling)</b>
<b class="nc">&nbsp;                currentBranchMessages.clear()</b>
<b class="nc">&nbsp;                &quot;Excellent work! Lets save this log for now. Is there anything else you would like to do?&quot;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-04-03 12:43</div>
</div>
</body>
</html>
